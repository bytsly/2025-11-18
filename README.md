# 国服ID申请拒签管理系统

## 项目简介

这是一个基于Python和Tkinter开发的桌面应用程序,用于管理国服ID申请的拒签记录。系统提供了完整的数据录入、图片管理、记录查看、删除、导出和导入功能。

## 功能特性

### 核心功能
1. **数据录入管理**
   - 呼号录入
   - 申请时间记录(自动填充当前时间,可手动修改)
   - 拒签原因文本输入

2. **图片上传与管理**
   - 执照照片上传
   - 操作证照片上传
   - 申请截图上传
   - 图片与呼号强绑定,文件名自动包含呼号信息
   - 支持格式: JPG, JPEG, PNG, BMP, GIF

3. **记录列表展示**
   - 表格形式展示所有拒签记录
   - 显示图片上传状态(✓/✗)
   - 拒签原因自动截断显示

4. **记录操作**
   - 查看完整图片(弹出窗口展示所有图片)
   - 删除记录(同时删除关联图片)
   - 列表刷新
   - 导出数据(支持导出JSON数据文件和图片目录)
   - 导入数据(支持导入JSON数据文件和图片目录)

5. **数据持久化**
   - JSON格式存储所有记录
   - 图片文件独立保存在images目录
   - 程序重启后数据自动恢复

## 技术参数

### 开发环境
- **编程语言**: Python 3.8+
- **GUI框架**: Tkinter (Python标准库)
- **图片处理**: Pillow 10.1.0

### 系统架构
```
拒签管理/
├── main.py                 # 主程序文件
├── requirements.txt        # 依赖包列表
├── README.md              # 项目说明文档
├── rejection_data.json    # 数据存储文件(运行后自动生成)
└── images/                # 图片存储目录(运行后自动生成)
    ├── 呼号_license_时间戳.jpg
    ├── 呼号_operator_时间戳.jpg
    └── 呼号_screenshot_时间戳.jpg
```

### 数据结构

#### JSON数据格式
```json
[
  {
    "callsign": "BG1ABC",
    "apply_time": "2025-10-18 14:30",
    "license_image": "images/BG1ABC_license_20251018_143000.jpg",
    "operator_image": "images/BG1ABC_operator_20251018_143010.jpg",
    "screenshot_image": "images/BG1ABC_screenshot_20251018_143020.jpg",
    "rejection_reason": "照片不清晰,无法识别关键信息",
    "create_time": "2025-10-18 14:30:25"
  }
]
```

#### 字段说明
- `callsign`: 呼号(必填)
- `apply_time`: 申请时间(必填)
- `license_image`: 执照照片路径(可选)
- `operator_image`: 操作证照片路径(可选)
- `screenshot_image`: 申请截图路径(可选)
- `rejection_reason`: 拒签原因(可选)
- `create_time`: 记录创建时间(自动生成)

### 界面规格
- **窗口尺寸**: 1400x700像素
- **标题字体**: Microsoft YaHei, 20号, 加粗
- **表格列宽**:
  - 序号: 50px
  - 呼号: 120px
  - 申请时间: 120px
  - 照片状态: 100px
  - 拒签原因: 250px

## 安装说明

### 1. 环境准备
确保已安装Python 3.8或更高版本:
```bash
python --version
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 运行程序
```bash
python main.py
```

### 4. 生成可执行文件(Windows)
```bash
# 安装PyInstaller
pip install pyinstaller

# 生成exe文件
pyinstaller --onefile --windowed --name "国服ID申请拒签管理" --icon=NONE main.py

# 生成的exe文件位于 dist/国服ID申请拒签管理.exe
```

## 使用指南

### 添加新记录
1. 填写**呼号**(必填)
2. 确认或修改**申请时间**(默认当前时间)
3. 点击"上传"按钮上传各类图片:
   - 执照照片
   - 操作证照片
   - 申请截图
4. 填写**拒签原因**
5. 点击"添加记录"按钮

### 查看图片
1. 在列表中选中一条记录
2. 点击"查看图片"按钮
3. 在弹出窗口中查看所有上传的图片

### 删除记录
1. 在列表中选中一条记录
2. 点击"删除记录"按钮
3. 确认删除(会同时删除关联的图片文件)

### 导出数据
1. 点击"导出数据"按钮
2. 选择导出文件保存位置和文件名
3. 确认是否同时导出图片目录
4. 完成数据备份

### 导入数据
1. 点击"导入数据"按钮
2. 选择要导入的JSON数据文件
3. 系统会自动检测是否存在关联的图片目录
4. 确认是否同时导入图片目录
5. 系统会自动备份当前数据
6. 完成数据导入并刷新显示

### 图片绑定机制
- 每张上传的图片文件名格式: `呼号_类型_时间戳.扩展名`
- 例如: `BG1ABC_license_20251018_143000.jpg`
- 确保图片与呼号强绑定,不会混淆

## 注意事项

1. **呼号唯一性**: 建议每个呼号使用唯一标识,避免混淆
2. **图片格式**: 支持常见图片格式,推荐使用JPG或PNG
3. **数据备份**: 定期备份`rejection_data.json`和`images`目录
4. **文件管理**: 删除记录会同时删除图片文件,请谨慎操作
5. **路径问题**: 程序会自动创建images目录,无需手动创建

## 故障排除

### 问题1: 图片无法显示
- 检查图片文件是否存在于images目录
- 确认图片格式是否支持
- 尝试重新上传图片

### 问题2: 数据丢失
- 检查`rejection_data.json`文件是否存在
- 查看文件是否有JSON格式错误
- 恢复备份文件

### 问题3: 程序启动失败
- 确认Python版本是否符合要求
- 检查依赖包是否正确安装
- 查看终端错误信息

## 更新日志

### v1.3.0 (2025-10-18)
- ✅ 增加可执行文件生成支持
  - 支持使用PyInstaller生成Windows exe文件
  - 提供一键打包脚本
  - 生成独立运行的可执行文件

### v1.2.0 (2025-10-18)
- ✅ 增加数据导入功能
  - 支持导入JSON数据文件
  - 支持选择性导入图片目录
  - 自动备份当前数据
  - 提供导入成功/失败提示

### v1.1.0 (2025-10-18)
- ✅ 增加数据导出功能
  - 支持导出JSON数据文件
  - 支持选择性导出图片目录
  - 提供导出成功/失败提示

### v1.0.0 (2025-10-18)
- ✅ 初始版本发布
- ✅ 实现基础数据录入功能
- ✅ 实现图片上传与绑定
- ✅ 实现记录列表展示
- ✅ 实现数据持久化存储
- ✅ 实现记录查看与删除功能

## 技术支持

如有问题或建议,请联系开发者。

## 许可证

本项目仅供学习和个人使用。
